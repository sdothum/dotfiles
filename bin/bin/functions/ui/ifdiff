#!/usr/bin/bash
# sdothum - 2016 (c) wtfpl

# UI
# ══════════════════════════════════════════════════════════════════════════════

# ............................................................... dirdiff action

# Usage: ifdiff <msg> | copy

sig=${sig:--TERM}

if [ "$@" != 'copy'  ] ;then
	# if no || ..
	underline ${YELLOW}$@
	while : ;do
		printf "${TEAL}continue? ${RED}[No]${NOCOLOR}/yes/abort / ${ORANGE}C${NOCOLOR}opy : "
		# using bash's extended read functionality (over dash) for single character input
		IFS= read -rn1 CONTINUE
		echo
		case $CONTINUE in
			''   ) exit 0 ;;
			[nN] ) exit 0 ;;
			[yY] ) exit 1 ;;
			[aA] ) { kill $sig ${TMPPID:-$PPID}; break; } ;;  # SEE: tmout
			[cC] ) exit 2 ;;                                  # SEE: kakdiff
		esac
	done
else
	# copy options
	while : ;do
		printf "${TEAL}copy ${RED}[No]${NOCOLOR}/abort / ${ORANGE}L${NOCOLOR}eft->right / ${ORANGE}R${NOCOLOR}ight->left / ${ORANGE}S${NOCOLOR}wap : "
		# using bash's extended read functionality (over dash) for single character input
		IFS= read -rn1 CONTINUE
		echo
		case $CONTINUE in
			''   ) exit 2 ;;
			[nN] ) exit 2 ;;
			[aA] ) { kill $sig ${TMPPID:-$PPID}; break; } ;;  # SEE: tmout
			[lL] ) exit 3 ;;
			[rR] ) exit 4 ;;
			[sS] ) exit 5 ;;
		esac
	done
fi

# kak: filetype=sh
